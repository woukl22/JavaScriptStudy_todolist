<!DOCTYPE html>
<meta charset="utf-8">
<html>
<head>
<title></title>
<script>
    const todoArray = []
    let todoCount = 1
    let specialCount = 1
    let doneCount = 1

    class Todo {
        constructor (todoList, id, input) {
            this.todoList = todoList
            this.id = id
            this.span = document.getElementById('todo').appendChild(document.createElement('span'))
            this.span.setAttribute('id', id)
            this.br = document.getElementById('todo').appendChild(document.createElement('br'))
            this.br.setAttribute('id', id)
        
            this.span.innerHTML = `- ${input}&nbsp;`

            this.removeButton = document.getElementById(`${id}`).appendChild(document.createElement('button'))
            this.specialButton = document.getElementById(`${id}`).appendChild(document.createElement('button'))
            this.removeButton.textContent = 'remove'
            this.specialButton.textContent = 'â˜†'
            this.removeButton.setAttribute('id', 'removeButton')
            this.specialButton.setAttribute('id', 'specialButton')

            this.removeButton.addEventListener('click', (event) => {
                this.todoList.removeChild(this.span)
                this.todoList.removeChild(this.br)
                todoArray.splice(todoArray.indexOf(this), 1)
                todoCount--
            })
        }
    }

    class SpecialTodo extends Todo {

    }

    class Done extends Todo {

    }

    document.addEventListener('DOMContentLoaded', () => {
        const input = document.querySelector('input')               // text input
        const dropdown = document.querySelector('select')           // dropdown list
        const addButton = document.querySelector('#add')            // add button

        const todoList = document.querySelector('#todo')            // To do list div
        const specialTodo = document.querySelector('#special')      // Special todo div
        const doneList = document.querySelector('#done')            // Done div

        // default to do
        todoArray.push(new Todo(todoList, todoCount++, 'Study'))
        todoArray.push(new Todo(todoList, todoCount++, 'Computer Game :)'))

        // dropdown
        dropdown.addEventListener('change', (event) => {
            const dropdownIndex = event.currentTarget.options.selectedIndex   // dropdown index

            switch(dropdownIndex){
                case 0:         // show 'To do list'
                    document.getElementById("title").textContent = "To Do List"
                    document.getElementById("todo").style.display="block"
                    document.getElementById("special").style.display="none"
                    document.getElementById("done").style.display="none"
                    break

                case 1:         // show 'Special todo'
                    document.getElementById("title").textContent = "Special Todo"
                    document.getElementById("todo").style.display="none"
                    document.getElementById("special").style.display="block"
                    document.getElementById("done").style.display="none"
                    break

                case 2:         // show 'Done'
                    document.getElementById("title").textContent = "Done"
                    document.getElementById("todo").style.display="none"
                    document.getElementById("special").style.display="none"
                    document.getElementById("done").style.display="block"
                    break
            }  
        })
        console.log(dropdown.value)
        // add button click event
        addButton.addEventListener('click', (event) =>{
            switch(dropdown.value){
                case 'To do list':
                    addButtonClick(todoArray, todoList, todoCount)
                    break

                case 'Special todo':
                    input.value = ''
                    break

                case 'Done':
                    input.value = ''
                    break
            }
        })
        
        const addButtonClick = (arr, list, count) => {
            try {
                if(input.value.trim() === ''){
                    throw 'Nothing to add'
                }
                arr.push(new Todo(list, count++, input.value.trim()))
                input.value = ''
            } catch (error) {
                alert('Please enter something to do.')
                input.value = ''
            }
        }
    })
    
</script>
</head>
<body>
    <!-- Title -->
    <h1 id="title">To Do List!</h1>

    <!-- input text && add button && dropdown -->
    <hr>
    <input type="text">
    <button id="add">Add</button>
    <select>
        <option>To do list</option>
        <option>Special todo</option>
        <option>Done</option>
    </select>
    <hr>


    <!-- To do list -->
    <div id="todo">
        
    </div>

    <!-- Special todo -->
    <div id="special" style="display:none">
        

    </div>

    <!-- Done -->
    <div id="done" style="display:none">
        

    </div>
</body>
</html>